"use strict";

inlets = 2;
outlets = 2;
autowatch = 1;
var mode = 1;
var chromatic = [36, 37, 38, 39, 40, 41, 42, 43, 41, 42, 43, 44, 45, 46, 47, 48, 46, 47, 48, 49, 50, 51, 52, 53, 51, 52, 53, 54, 55, 56, 57, 58, 56, 57, 58, 59, 60, 61, 62, 63, 61, 62, 63, 64, 65, 66, 67, 68, 66, 67, 68, 69, 70, 71, 72, 73, 71, 72, 73, 74, 75, 76, 77, 78];
var ionian = [36, 38, 40, 41, 43, 45, 47, 48, 41, 43, 45, 47, 48, 50, 52, 53, 47, 48, 50, 52, 53, 55, 57, 59, 52, 53, 55, 57, 59, 60, 62, 64, 57, 59, 60, 62, 64, 65, 67, 69, 62, 64, 65, 67, 69, 71, 72, 74, 67, 69, 71, 72, 74, 76, 77, 79, 72, 74, 76, 77, 79, 81, 83, 84];
var dorian = [36, 38, 39, 41, 43, 45, 46, 48, 41, 43, 45, 46, 48, 50, 51, 53, 46, 48, 50, 51, 53, 55, 57, 58, 51, 53, 55, 57, 58, 60, 62, 63, 57, 58, 60, 62, 63, 65, 67, 69, 62, 63, 65, 67, 69, 70, 72, 74, 67, 69, 70, 72, 74, 75, 77, 79, 72, 74, 75, 77, 79, 81, 82, 84];
var phrygian = [36, 37, 39, 41, 43, 44, 46, 48, 41, 43, 44, 46, 48, 49, 51, 53, 46, 48, 49, 51, 53, 55, 56, 58, 51, 53, 55, 56, 58, 60, 61, 63, 56, 58, 60, 61, 63, 65, 67, 68, 61, 63, 65, 67, 68, 70, 72, 73, 67, 68, 70, 72, 73, 75, 77, 79, 72, 73, 75, 77, 79, 80, 82, 84];
var lydian = [36, 38, 40, 42, 43, 45, 47, 48, 42, 43, 45, 47, 48, 50, 52, 54, 47, 48, 50, 52, 54, 55, 57, 59, 52, 54, 55, 57, 59, 60, 62, 64, 57, 59, 60, 62, 64, 66, 67, 69, 62, 64, 66, 67, 69, 71, 72, 74, 67, 69, 71, 72, 74, 76, 78, 79, 72, 74, 76, 78, 79, 81, 83, 84];
var mixolydian = [36, 38, 40, 42, 43, 45, 46, 48, 42, 43, 45, 46, 48, 50, 52, 54, 46, 48, 50, 52, 54, 55, 57, 58, 52, 54, 55, 57, 58, 60, 62, 64, 57, 58, 60, 62, 64, 66, 67, 69, 62, 64, 66, 67, 69, 70, 72, 74, 67, 69, 70, 72, 74, 76, 78, 79, 72, 74, 76, 78, 79, 81, 82, 84];
var aeolian = [36, 38, 39, 41, 43, 44, 46, 48, 41, 43, 44, 46, 48, 50, 51, 53, 46, 48, 50, 51, 53, 55, 56, 58, 51, 53, 55, 56, 58, 60, 62, 63, 56, 58, 60, 62, 63, 65, 67, 68, 62, 63, 65, 67, 68, 70, 72, 74, 67, 68, 70, 72, 74, 75, 77, 79, 72, 74, 75, 77, 79, 80, 82, 84];
var locrian = [36, 37, 39, 41, 42, 44, 46, 48, 41, 42, 44, 46, 48, 49, 51, 53, 46, 48, 49, 51, 53, 54, 56, 58, 51, 53, 54, 56, 58, 60, 61, 63, 56, 58, 60, 61, 63, 65, 66, 68, 61, 63, 65, 66, 68, 70, 72, 73, 66, 68, 70, 72, 73, 75, 77, 78, 72, 73, 75, 77, 78, 80, 82, 84];
var modes = [chromatic, ionian, dorian, phrygian, lydian, mixolydian, aeolian, locrian];

function list(note, velocity) {
  // Quantize input note to selected mode
  var currentMode = modes[mode];
  note = currentMode[note - 60];
  outlet(0, note, velocity);
}

function msg_int(a) {
  if (inlet === 1) {
    // Set currently selected mode
    mode = a; // set color of 'mode select' LEDs

    for (var i = 36; i <= 43; i++) {
      var ledColor = i === a + 36 ? 127 : 122;
      outlet(1, 176, i, ledColor);
    }
  }
}